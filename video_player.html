<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <title>Конец молчания — От ада к славе</title>
    <meta property="og:image" content="ico.jpg">    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=IM+Fell+English:ital@0;1&family=Uncial+Antiqua&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #c9a84c;
            --gold-light: #f0d080;
            --crimson: #8b0000;
            --crimson-glow: #cc2200;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html, body {
            width: 100%; height: 100%;
            background: #000;
            overflow: hidden;
        }

        /* ── Particle canvas ── */
        #canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        /* ── Intro screen — scrollable ── */
        #intro {
            position: fixed;
            inset: 0;
            z-index: 100;
            overflow-y: auto;
            overflow-x: hidden;
            background: radial-gradient(ellipse at center bottom, #1a0800 0%, #000 60%);
            transition: opacity 0.8s ease;
            -webkit-overflow-scrolling: touch;
        }
        #intro.fade-out { opacity: 0; pointer-events: none; }

        /* Inner wrapper centres content, min-height ensures scroll room */
        .intro-inner {
            min-height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 48px 24px 60px;
        }

        /* ── Cross ── */
        .cross-icon {
            width: 60px; height: 90px;
            position: relative;
            margin-bottom: 28px;
            flex-shrink: 0;
            animation: glowPulse 3s ease-in-out infinite;
        }
        .cross-icon::before, .cross-icon::after {
            content: '';
            position: absolute;
            background: var(--gold);
            border-radius: 2px;
        }
        .cross-icon::before {
            width: 8px; height: 90px;
            left: 50%; transform: translateX(-50%);
            box-shadow: 0 0 20px var(--gold), 0 0 60px rgba(201,168,76,0.3);
        }
        .cross-icon::after {
            width: 50px; height: 8px;
            top: 24px; left: 50%; transform: translateX(-50%);
            box-shadow: 0 0 20px var(--gold), 0 0 60px rgba(201,168,76,0.3);
        }
        @keyframes glowPulse {
            0%, 100% { filter: drop-shadow(0 0 8px var(--gold)); }
            50%       { filter: drop-shadow(0 0 24px var(--gold-light)) drop-shadow(0 0 60px var(--gold)); }
        }

        /* ── Text elements ── */
        .intro-tagline {
            font-family: 'IM Fell English', serif;
            font-style: italic;
            font-size: clamp(11px, 2.5vw, 13px);
            color: rgba(201,168,76,0.6);
            letter-spacing: 0.25em;
            text-transform: uppercase;
            margin-bottom: 10px;
            animation: fadeUp 1.2s 0.3s both;
            text-align: center;
        }

        .intro-title {
            font-family: 'Cinzel Decorative', serif;
            font-size: clamp(20px, 5.5vw, 42px);
            color: var(--gold);
            text-align: center;
            line-height: 1.25;
            text-shadow: 0 0 40px rgba(201,168,76,0.6), 0 2px 4px rgba(0,0,0,0.8);
            animation: fadeUp 1.2s 0.6s both;
            margin-bottom: 6px;
        }

        .intro-subtitle {
            font-family: 'Cinzel Decorative', serif;
            font-size: clamp(13px, 3vw, 22px);
            color: rgba(201,168,76,0.72);
            text-align: center;
            animation: fadeUp 1.2s 0.9s both;
            margin-bottom: 24px;
        }

        .intro-divider {
            width: 180px; height: 1px;
            background: linear-gradient(to right, transparent, var(--gold), transparent);
            margin: 0 auto 24px;
            animation: fadeUp 1.2s 1.0s both;
            flex-shrink: 0;
        }

        /* ── Description — Uncial Antiqua for drama ── */
        .intro-description {
            max-width: 500px;
            width: 100%;
            text-align: center;
            color: rgba(225,210,170,0.88);
            font-family: 'Uncial Antiqua', serif;
            font-size: clamp(13px, 2.6vw, 17px);
            line-height: 2;
            animation: fadeUp 1.2s 1.2s both;
            margin-bottom: 36px;
            text-shadow: 0 1px 10px rgba(0,0,0,0.9);
        }

        .intro-description .line {
            display: block;
            margin-bottom: 2px;
        }
        .intro-description .gap { display: block; height: 0.7em; }

        .intro-description strong {
            color: var(--gold-light);
            font-style: normal;
            text-shadow: 0 0 18px rgba(201,168,76,0.5);
        }

        /* ── Watch button ── */
        .watch-btn {
            font-family: 'Cinzel Decorative', serif;
            font-size: clamp(11px, 2.2vw, 14px);
            letter-spacing: 0.2em;
            color: #000;
            background: linear-gradient(135deg, var(--gold-light), var(--gold));
            border: none;
            padding: 16px 52px;
            cursor: pointer;
            border-radius: 2px;
            animation: fadeUp 1.2s 1.5s both;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 30px rgba(201,168,76,0.4);
            flex-shrink: 0;
        }
        .watch-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 50px rgba(201,168,76,0.65);
        }
        .watch-btn:active { transform: scale(0.97); }

        .intro-verse {
            margin-top: 28px;
            font-family: 'IM Fell English', serif;
            font-style: italic;
            font-size: clamp(12px, 2.2vw, 15px);
            color: rgba(201,168,76,0.5);
            letter-spacing: 0.05em;
            animation: fadeUp 1.2s 1.8s both;
            text-align: center;
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(18px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        /* ── Player screen ── */
        #player-screen {
            position: fixed;
            inset: 0;
            z-index: 50;
            display: none;
            background: #000;
        }
        #player-screen.visible { display: flex; }

        .video-wrapper {
            position: relative;
            width: 100%; height: 100%;
        }
        video {
            width: 100%; height: 100%;
            object-fit: contain;
            background: #000;
        }

        /* Top bar */
        .player-topbar {
            position: absolute;
            top: 0; left: 0; right: 0;
            padding: 14px 20px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.88), transparent);
            z-index: 20;
            display: flex;
            align-items: center;
            gap: 14px;
            opacity: 1;
            transition: opacity 0.4s;
        }
        .player-topbar.hide { opacity: 0; }

        .topbar-cross {
            width: 13px; height: 20px;
            position: relative; flex-shrink: 0;
        }
        .topbar-cross::before, .topbar-cross::after {
            content: '';
            position: absolute;
            background: var(--gold);
            border-radius: 1px;
        }
        .topbar-cross::before { width: 3px; height: 20px; left: 50%; transform: translateX(-50%); }
        .topbar-cross::after  { width: 13px; height: 3px; top: 5px; left: 50%; transform: translateX(-50%); }

        .topbar-title {
            font-family: 'Cinzel Decorative', serif;
            font-size: clamp(9px, 1.8vw, 13px);
            color: var(--gold);
            letter-spacing: 0.07em;
            text-shadow: 0 0 20px rgba(201,168,76,0.5);
        }

        .back-btn {
            margin-left: auto;
            flex-shrink: 0;
            background: rgba(201,168,76,0.1);
            border: 1px solid rgba(201,168,76,0.3);
            color: var(--gold);
            padding: 6px 14px;
            cursor: pointer;
            border-radius: 2px;
            font-family: 'IM Fell English', serif;
            font-size: 13px;
            letter-spacing: 0.08em;
            transition: background 0.2s;
        }
        .back-btn:hover { background: rgba(201,168,76,0.25); }

        /* Big play overlay — centred with safe offset for controls */
        .play-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0,0,0,0.45);
            z-index: 10;
            cursor: pointer;
            opacity: 1;
            transition: opacity 0.3s;
            /* shift up slightly so button isn't hidden by bottom controls */
            padding-bottom: 70px;
            padding-top: 50px;
        }
        .play-overlay.hidden { opacity: 0; pointer-events: none; }

        .big-play-btn {
            width: 86px; height: 86px;
            border-radius: 50%;
            border: 2px solid var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.55);
            backdrop-filter: blur(8px);
            cursor: pointer;
            transition: transform 0.2s, border-color 0.2s, box-shadow 0.2s;
            box-shadow: 0 0 40px rgba(201,168,76,0.3), inset 0 0 24px rgba(0,0,0,0.4);
            flex-shrink: 0;
        }
        .big-play-btn:hover {
            transform: scale(1.08);
            border-color: var(--gold-light);
            box-shadow: 0 0 70px rgba(201,168,76,0.55), inset 0 0 24px rgba(0,0,0,0.4);
        }
        .big-play-btn::after {
            content: '';
            width: 0; height: 0;
            border-left: 27px solid var(--gold);
            border-top: 16px solid transparent;
            border-bottom: 16px solid transparent;
            margin-left: 7px;
        }

        /* Controls */
        .controls {
            position: absolute;
            bottom: 0; left: 0; right: 0;
            padding: 28px 18px 16px;
            background: linear-gradient(to top, rgba(0,0,0,0.92) 0%, rgba(0,0,0,0.4) 60%, transparent 100%);
            z-index: 15;
            opacity: 1;
            transition: opacity 0.4s;
        }
        .controls.hide { opacity: 0; }

        .progress-track {
            width: 100%;
            height: 3px;
            background: rgba(255,255,255,0.15);
            border-radius: 2px;
            cursor: pointer;
            margin-bottom: 12px;
            position: relative;
            transition: height 0.15s;
        }
        .progress-track:hover { height: 5px; }
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--crimson-glow), var(--gold));
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s linear;
            position: relative;
        }
        .progress-fill::after {
            content: '';
            position: absolute;
            right: -5px; top: 50%;
            transform: translateY(-50%);
            width: 10px; height: 10px;
            background: var(--gold-light);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: 0 0 8px var(--gold);
        }
        .progress-track:hover .progress-fill::after { opacity: 1; }

        .ctrl-row {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .ctrl-btn {
            background: none;
            border: none;
            color: rgba(255,255,255,0.85);
            cursor: pointer;
            font-size: 18px;
            padding: 8px;
            border-radius: 3px;
            transition: color 0.2s, transform 0.1s;
            line-height: 1;
        }
        .ctrl-btn:hover { color: var(--gold); transform: scale(1.12); }

        .time-display {
            font-family: 'IM Fell English', serif;
            font-size: 13px;
            color: rgba(201,168,76,0.7);
            margin-left: auto;
            letter-spacing: 0.04em;
        }

        /* Mobile portrait rotation */
        @media screen and (max-width: 768px) and (orientation: portrait) {
            #player-screen {
                transform: rotate(90deg);
                transform-origin: center center;
                width: 100vh; height: 100vw;
                position: fixed;
                top: 50%; left: 50%;
                margin-left: -50vh;
                margin-top: -50vw;
            }
        }
    </style>
</head>
<body>

<canvas id="canvas"></canvas>

<!-- ── INTRO ── -->
<div id="intro">
    <div class="intro-inner">
        <div class="cross-icon"></div>
        <p class="intro-tagline">Авторское кинематографическое видение</p>
        <h1 class="intro-title">Конец молчания</h1>
        <h2 class="intro-subtitle">От ада к славе</h2>
        <div class="intro-divider"></div>

        <p class="intro-description">
            <span class="line">Гипотетическая художественная интерпретация</span>
            <span class="line">Визуальный сценарий того, что могло бы произойти,</span>
            <span class="line">если бы Отець ответил на распятие Христа</span>
            <span class="line">всей силой <strong>неба и земли</strong>.</span>
            <span class="gap"></span>
            <span class="line">Но среди хаоса — <strong>Христос</strong>.</span>
            <span class="line">Грань между судом и милостью.</span>
            <span class="line">Финал - не о разрушении, а о <strong>выборе</strong>.</span>
            <span class="gap"></span>
            <span class="line">Предупреждение человечеству:</span>
            <span class="line">не потеряться в собственной гордости и равнодушии.</span>
        </p>

        <button class="watch-btn" id="watchBtn">▶ &nbsp; Смотреть</button>
        <p class="intro-verse">«Кто имеет уши — да услышит»</p>
    </div>
</div>

<!-- ── PLAYER ── -->
<div id="player-screen">
    <div class="video-wrapper" id="videoWrapper">

        <div class="player-topbar" id="topbar">
            <div class="topbar-cross"></div>
            <span class="topbar-title">Конец молчания &mdash; От ада к славе</span>
            <button class="back-btn" id="backBtn">← Назад</button>
        </div>

        <video id="videoPlayer" preload="metadata" playsinline webkit-playsinline>
            <source src="https://www.dropbox.com/scl/fi/y49yu23752ack1lxym3vk/End-of-Silence-From-Hell-to-Glory.mp4?rlkey=bptigoqnpin3tswmcn4nwd2md&st=rys2kyrs&dl=1" type="video/mp4">
        </video>

        <div class="play-overlay" id="playOverlay">
            <div class="big-play-btn" id="bigPlayBtn"></div>
        </div>

        <div class="controls" id="controls">
            <div class="progress-track" id="progressBar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="ctrl-row">
                <button class="ctrl-btn" id="playBtn">▶</button>
                <button class="ctrl-btn" id="muteBtn">🔊</button>
                <span class="time-display" id="time">0:00 / 0:00</span>
            </div>
        </div>
    </div>
</div>

<script>
    /* ── Particles ── */
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    const particles = Array.from({ length: 80 }, () => ({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 1.5 + 0.3,
        speed: Math.random() * 0.4 + 0.1,
        opacity: Math.random(),
        dir: Math.random() > 0.5 ? 1 : -1,
        drift: (Math.random() - 0.5) * 0.3,
        hue: Math.random() > 0.7 ? 40 : 0
    }));

    (function animateParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        for (const p of particles) {
            p.y -= p.speed; p.x += p.drift;
            p.opacity += 0.005 * p.dir;
            if (p.opacity > 1 || p.opacity < 0) p.dir *= -1;
            if (p.y < -5) { p.y = canvas.height + 5; p.x = Math.random() * canvas.width; }
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
            ctx.fillStyle = p.hue === 40
                ? `rgba(201,168,76,${p.opacity * 0.7})`
                : `rgba(180,40,10,${p.opacity * 0.5})`;
            ctx.fill();
        }
        requestAnimationFrame(animateParticles);
    })();

    /* ── Intro / Player nav ── */
    const intro = document.getElementById('intro');
    const playerScreen = document.getElementById('player-screen');

    document.getElementById('watchBtn').addEventListener('click', () => {
        intro.classList.add('fade-out');
        setTimeout(() => {
            intro.style.display = 'none';
            playerScreen.classList.add('visible');
            playOverlay.classList.remove('hidden');
        }, 800);
    });

    document.getElementById('backBtn').addEventListener('click', () => {
        video.pause();
        playBtn.textContent = '▶';
        playerScreen.classList.remove('visible');
        intro.style.display = '';
        intro.classList.remove('fade-out');
    });

    /* ── Player ── */
    const video        = document.getElementById('videoPlayer');
    const playBtn      = document.getElementById('playBtn');
    const muteBtn      = document.getElementById('muteBtn');
    const progressBar  = document.getElementById('progressBar');
    const progressFill = document.getElementById('progressFill');
    const timeDisplay  = document.getElementById('time');
    const controls     = document.getElementById('controls');
    const topbar       = document.getElementById('topbar');
    const playOverlay  = document.getElementById('playOverlay');
    const bigPlayBtn   = document.getElementById('bigPlayBtn');
    const videoWrapper = document.getElementById('videoWrapper');

    let hideTimer;

    const fmt = s => isNaN(s) ? '0:00' : `${Math.floor(s/60)}:${String(Math.floor(s%60)).padStart(2,'0')}`;

    function showControls() {
        controls.classList.remove('hide');
        topbar.classList.remove('hide');
        if (!video.paused) startHide();
    }
    function startHide() {
        clearTimeout(hideTimer);
        hideTimer = setTimeout(() => {
            if (!video.paused) { controls.classList.add('hide'); topbar.classList.add('hide'); }
        }, 3000);
    }
    function togglePlay() {
        if (video.paused) {
            video.play(); playBtn.textContent = '⏸';
            playOverlay.classList.add('hidden'); startHide();
        } else {
            video.pause(); playBtn.textContent = '▶'; showControls();
        }
    }

    bigPlayBtn.addEventListener('click', e => { e.stopPropagation(); togglePlay(); });
    playOverlay.addEventListener('click', e => { if (e.target === playOverlay) togglePlay(); });
    playBtn.addEventListener('click', e => { e.stopPropagation(); togglePlay(); });
    video.addEventListener('click', togglePlay);

    muteBtn.addEventListener('click', e => {
        e.stopPropagation();
        video.muted = !video.muted;
        muteBtn.textContent = video.muted ? '🔇' : '🔊';
    });

    video.addEventListener('timeupdate', () => {
        progressFill.style.width = (video.currentTime / video.duration * 100) + '%';
        timeDisplay.textContent = `${fmt(video.currentTime)} / ${fmt(video.duration)}`;
    });

    progressBar.addEventListener('click', e => {
        const r = progressBar.getBoundingClientRect();
        video.currentTime = ((e.clientX - r.left) / r.width) * video.duration;
    });

    video.addEventListener('play',  () => { playBtn.textContent = '⏸'; startHide(); });
    video.addEventListener('pause', () => { playBtn.textContent = '▶'; showControls(); clearTimeout(hideTimer); });
    video.addEventListener('ended', () => { playBtn.textContent = '▶'; showControls(); playOverlay.classList.remove('hidden'); });

    videoWrapper.addEventListener('mousemove', showControls);
    videoWrapper.addEventListener('mouseleave', () => { if (!video.paused) startHide(); });
    videoWrapper.addEventListener('touchstart', e => {
        if (!e.target.closest('button') && !e.target.closest('.progress-track')) {
            if (controls.classList.contains('hide')) showControls();
            else if (!video.paused) { controls.classList.add('hide'); topbar.classList.add('hide'); }
        }
    });

    document.addEventListener('keydown', e => {
        switch(e.code) {
            case 'Space':      e.preventDefault(); togglePlay(); break;
            case 'KeyM':       video.muted = !video.muted; muteBtn.textContent = video.muted ? '🔇' : '🔊'; break;
            case 'ArrowLeft':  video.currentTime -= 5; break;
            case 'ArrowRight': video.currentTime += 5; break;
        }
    });

    if ('wakeLock' in navigator) {
        let wl;
        video.addEventListener('play',  async () => { try { wl = await navigator.wakeLock.request('screen'); } catch{} });
        video.addEventListener('pause', () => { if (wl) { wl.release(); wl = null; } });
    }
</script>
</body>
</html>
